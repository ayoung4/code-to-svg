<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 720" width="1000" height="720">

        
        <text x="20" y="20" style="font-family:courier; white-space: pre">
          1
        </text>
        
        <text x="65" y="20" style="font-family:courier; white-space: pre">
        import * as R from &apos;ramda&apos;;
        </text>

        
        <text x="20" y="40" style="font-family:courier; white-space: pre">
          2
        </text>
        
        <text x="65" y="40" style="font-family:courier; white-space: pre">
        import * as Future from &apos;fluture&apos;;
        </text>

        
        <text x="20" y="60" style="font-family:courier; white-space: pre">
          3
        </text>
        
        <text x="65" y="60" style="font-family:courier; white-space: pre">
        
        </text>

        
        <text x="20" y="80" style="font-family:courier; white-space: pre">
          4
        </text>
        
        <text x="65" y="80" style="font-family:courier; white-space: pre">
        import { Configuration } from &apos;../constants&apos;;
        </text>

        
        <text x="20" y="100" style="font-family:courier; white-space: pre">
          5
        </text>
        
        <text x="65" y="100" style="font-family:courier; white-space: pre">
        import { readDirectory, readFile } from &apos;./fs&apos;;
        </text>

        
        <text x="20" y="120" style="font-family:courier; white-space: pre">
          6
        </text>
        
        <text x="65" y="120" style="font-family:courier; white-space: pre">
        import * as SVG from &apos;./svg&apos;;
        </text>

        
        <text x="20" y="140" style="font-family:courier; white-space: pre">
          7
        </text>
        
        <text x="65" y="140" style="font-family:courier; white-space: pre">
        
        </text>

        
        <text x="20" y="160" style="font-family:courier; white-space: pre">
          8
        </text>
        
        <text x="65" y="160" style="font-family:courier; white-space: pre">
        export const init = (config: Configuration) =&gt; {
        </text>

        
        <text x="20" y="180" style="font-family:courier; white-space: pre">
          9
        </text>
        
        <text x="65" y="180" style="font-family:courier; white-space: pre">
        
        </text>

        
        <text x="20" y="200" style="font-family:courier; white-space: pre">
         10
        </text>
        
        <text x="65" y="200" style="font-family:courier; white-space: pre">
            const { maxParallelism, dirpath } = config;
        </text>

        
        <text x="20" y="220" style="font-family:courier; white-space: pre">
         11
        </text>
        
        <text x="65" y="220" style="font-family:courier; white-space: pre">
            const { createSvg, saveSvg } = SVG.init(config);
        </text>

        
        <text x="20" y="240" style="font-family:courier; white-space: pre">
         12
        </text>
        
        <text x="65" y="240" style="font-family:courier; white-space: pre">
        
        </text>

        
        <text x="20" y="260" style="font-family:courier; white-space: pre">
         13
        </text>
        
        <text x="65" y="260" style="font-family:courier; white-space: pre">
            const convertFile = (filename: string) =&gt;
        </text>

        
        <text x="20" y="280" style="font-family:courier; white-space: pre">
         14
        </text>
        
        <text x="65" y="280" style="font-family:courier; white-space: pre">
                readFile(filename)
        </text>

        
        <text x="20" y="300" style="font-family:courier; white-space: pre">
         15
        </text>
        
        <text x="65" y="300" style="font-family:courier; white-space: pre">
                    .map(R.tap(() =&gt; console.log(`opening ${filename}`)))
        </text>

        
        <text x="20" y="320" style="font-family:courier; white-space: pre">
         16
        </text>
        
        <text x="65" y="320" style="font-family:courier; white-space: pre">
                    .map(createSvg as any)
        </text>

        
        <text x="20" y="340" style="font-family:courier; white-space: pre">
         17
        </text>
        
        <text x="65" y="340" style="font-family:courier; white-space: pre">
                    .chain(saveSvg(filename))
        </text>

        
        <text x="20" y="360" style="font-family:courier; white-space: pre">
         18
        </text>
        
        <text x="65" y="360" style="font-family:courier; white-space: pre">
                    .bimap(
        </text>

        
        <text x="20" y="380" style="font-family:courier; white-space: pre">
         19
        </text>
        
        <text x="65" y="380" style="font-family:courier; white-space: pre">
                        R.tap(() =&gt; console.log(`failed to save ${filename}.svg`)),
        </text>

        
        <text x="20" y="400" style="font-family:courier; white-space: pre">
         20
        </text>
        
        <text x="65" y="400" style="font-family:courier; white-space: pre">
                        R.tap(() =&gt; console.log(`saved ${filename}.svg`)),
        </text>

        
        <text x="20" y="420" style="font-family:courier; white-space: pre">
         21
        </text>
        
        <text x="65" y="420" style="font-family:courier; white-space: pre">
                    );
        </text>

        
        <text x="20" y="440" style="font-family:courier; white-space: pre">
         22
        </text>
        
        <text x="65" y="440" style="font-family:courier; white-space: pre">
        
        </text>

        
        <text x="20" y="460" style="font-family:courier; white-space: pre">
         23
        </text>
        
        <text x="65" y="460" style="font-family:courier; white-space: pre">
            const createFilepath = (name: string) =&gt; dirpath + &apos;/&apos; + name;
        </text>

        
        <text x="20" y="480" style="font-family:courier; white-space: pre">
         24
        </text>
        
        <text x="65" y="480" style="font-family:courier; white-space: pre">
        
        </text>

        
        <text x="20" y="500" style="font-family:courier; white-space: pre">
         25
        </text>
        
        <text x="65" y="500" style="font-family:courier; white-space: pre">
            const convertFiles = (filepaths: string[]) =&gt;
        </text>

        
        <text x="20" y="520" style="font-family:courier; white-space: pre">
         26
        </text>
        
        <text x="65" y="520" style="font-family:courier; white-space: pre">
                Future.parallel(maxParallelism, R.map(convertFile, filepaths));
        </text>

        
        <text x="20" y="540" style="font-family:courier; white-space: pre">
         27
        </text>
        
        <text x="65" y="540" style="font-family:courier; white-space: pre">
        
        </text>

        
        <text x="20" y="560" style="font-family:courier; white-space: pre">
         28
        </text>
        
        <text x="65" y="560" style="font-family:courier; white-space: pre">
            return {
        </text>

        
        <text x="20" y="580" style="font-family:courier; white-space: pre">
         29
        </text>
        
        <text x="65" y="580" style="font-family:courier; white-space: pre">
                convertDirectory: readDirectory(dirpath)
        </text>

        
        <text x="20" y="600" style="font-family:courier; white-space: pre">
         30
        </text>
        
        <text x="65" y="600" style="font-family:courier; white-space: pre">
                    .map(R.map(createFilepath) as any)
        </text>

        
        <text x="20" y="620" style="font-family:courier; white-space: pre">
         31
        </text>
        
        <text x="65" y="620" style="font-family:courier; white-space: pre">
                    .chain(convertFiles as any),
        </text>

        
        <text x="20" y="640" style="font-family:courier; white-space: pre">
         32
        </text>
        
        <text x="65" y="640" style="font-family:courier; white-space: pre">
            };
        </text>

        
        <text x="20" y="660" style="font-family:courier; white-space: pre">
         33
        </text>
        
        <text x="65" y="660" style="font-family:courier; white-space: pre">
        
        </text>

        
        <text x="20" y="680" style="font-family:courier; white-space: pre">
         34
        </text>
        
        <text x="65" y="680" style="font-family:courier; white-space: pre">
        };
        </text>

        
        <text x="20" y="700" style="font-family:courier; white-space: pre">
         35
        </text>
        
        <text x="65" y="700" style="font-family:courier; white-space: pre">
        
        </text>
</svg>